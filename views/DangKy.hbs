<script src='https://www.google.com/recaptcha/api.js'></script>
<main class="pb-5 mb-5 justify-content-center align-items-center d-flex">
    <div class="container flex-row d-flex justify-content-center">
        <div class="col-md-8 pt-4 col-lg-6 align-self-center dangky">
            <h3 class="text-center" style="color:#03899c;"><i class="fas fa-user-plus"></i>   Đăng ký tài khoản</h3>
            <hr> 
            {{#if (notEmpty message)}}
                <div class="alert alert-danger">{{message}}</div>
            {{/if}}
            <form  id="formDangKy" method="POST">
                <div class="form-group" id="name">
                    <label for="exampleInputEmail1">Họ và tên *</label>
                    <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Họ và tên" required name="fullname">
                </div>

                <div class="form-group" id="email">
                    <label for="exampleInputEmail1">Nhập địa chỉ email *</label>
                    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="name@example.com"
                        required name="email" >
                </div>
                <div class="form-group" id="phoneNum">
                    <label for="exampleInputEmail1">Nhập số điện thoại *</label>
                    <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Nhập số điện thoại liên lạc"
                        name="phoneNum">
                </div>
                <div class="form-group" id="address">
                    <label for="exampleInputEmail1">Nhập địa chỉ liên hệ</label>
                    <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Nhập địa chỉ liên lạc"
                        name="address">
                </div>
                <hr>
                <div class="form-group" id="password">
                    <label for="exampleInputPassword1">Mật khẩu *</label>
                    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password"
                    name="password" >
                </div>
                <div class="form-group" id="cfmPass">
                    <label for="exampleInputPassword1">Nhập lại mật khẩu *</label>
                    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Confirm Password">
                </div>
                <div id = "alrDontMatch" style="display:none">
                    <p style="color:red; font-style:italic">Mật khẩu không khớp</p>
                </div>
                <div class="form-group form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1" required>
                    <label class="form-check-label" for="exampleCheck1">Đồng ý với chính sách và bảo mật</label>
                </div>
                <div class="form-group">
                    <div class="g-recaptcha" data-sitekey="6LcpaVsUAAAAAB0UaIj376Oq8xlaFZIycwmNL8Ud"></div>
                </div>
                <button type="submit" style="width:100%" class="btn btn-success">Đăng ký tài khoản</button>
                <hr>
            </form>
            <p class="text-center">Đã có tài khoản?
                <a href="./DangNhap.html">Đăng Nhập</a>
            </p>
        </div>
    </div>
</main>

<script>
  

    $('#cfmPass').on('input',function(){
        psw = $('#password input').val();
        cfpsw = $('#cfmPass input').val();
        console.log(psw,cfpsw);
        if (psw != cfpsw){
            $('#alrDontMatch').css("display","block");
        }
        else{
            $('#alrDontMatch').css("display","none");
        }
    });
    $('#formDangKy').on('submit',function(){
      
        psw = $('#password input').val();
        cfpsw = $('#cfmPass input').val()

        var captcha = $('#g-recaptcha-response').val();
        var fullName = $('#name input').val();
        var email = $('#email input').val(); 
        var phoneNum = $('#phoneNum input').val();
        var address = $('#address input').val();
        var password = $('#password input').val();
        var data = {
                    fullName: fullName,
                    email: email,
                    captcha: captcha,
                    phoneNum: phoneNum,
                    address: address,
                    password:password
                }
        if (psw !== cfpsw){
            return false;
        }
        else{
            {{!-- $.ajax({
                url: '/DangKy',
                type: "POST",
                data: data,
                success: function(res){
                    console.log(res)
                    if (res.success){
                        console.log('true')
                        return true;
                    }
                    else{
                        console.log('false')
                        alert(res.msg)
                        return false;
                    }
                }
            }
            ) --}}
            return true;
        } 
            
    })
</script>

<style>
    #formDangKy label{
        color:#03899c;

    }
</style>